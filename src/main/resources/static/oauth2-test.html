<!--<!DOCTYPE html>-->
<!--<html lang="ko">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>네이버 소셜 로그인 테스트</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Arial', sans-serif;-->
<!--            max-width: 600px;-->
<!--            margin: 50px auto;-->
<!--            padding: 20px;-->
<!--            background-color: #f5f5f5;-->
<!--        }-->
<!--        .container {-->
<!--            background: white;-->
<!--            padding: 30px;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 2px 10px rgba(0,0,0,0.1);-->
<!--        }-->
<!--        h1 {-->
<!--            color: #333;-->
<!--            text-align: center;-->
<!--        }-->
<!--        .login-button {-->
<!--            display: block;-->
<!--            width: 100%;-->
<!--            padding: 15px;-->
<!--            margin: 10px 0;-->
<!--            border: none;-->
<!--            border-radius: 5px;-->
<!--            font-size: 16px;-->
<!--            cursor: pointer;-->
<!--            transition: opacity 0.3s;-->
<!--        }-->
<!--        .naver-login {-->
<!--            background-color: #03C75A;-->
<!--            color: white;-->
<!--        }-->
<!--        .logout-button {-->
<!--            background-color: #dc3545;-->
<!--            color: white;-->
<!--        }-->
<!--        .login-button:hover {-->
<!--            opacity: 0.8;-->
<!--        }-->
<!--        .user-info {-->
<!--            margin-top: 20px;-->
<!--            padding: 15px;-->
<!--            background-color: #f9f9f9;-->
<!--            border-radius: 5px;-->
<!--            display: none;-->
<!--        }-->
<!--        .user-info.show {-->
<!--            display: block;-->
<!--        }-->
<!--        .info-item {-->
<!--            margin: 10px 0;-->
<!--            padding: 10px;-->
<!--            background: white;-->
<!--            border-radius: 3px;-->
<!--        }-->
<!--        .label {-->
<!--            font-weight: bold;-->
<!--            color: #555;-->
<!--        }-->
<!--        .security-info {-->
<!--            margin-top: 20px;-->
<!--            padding: 15px;-->
<!--            background-color: #e7f3ff;-->
<!--            border-left: 4px solid #2196F3;-->
<!--            border-radius: 5px;-->
<!--        }-->
<!--        .security-info h3 {-->
<!--            margin-top: 0;-->
<!--            color: #1976D2;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>🔐 네이버 소셜 로그인 테스트</h1>-->
<!--        -->
<!--        <button class="login-button naver-login" onclick="loginWithNaver()">-->
<!--            네이버로 로그인-->
<!--        </button>-->
<!--        -->
<!--        <button class="login-button" style="background-color: #4285f4; color: white;" onclick="checkLoginStatus()">-->
<!--            로그인 상태 확인-->
<!--        </button>-->

<!--        <button class="login-button logout-button" onclick="logout()">-->
<!--            로그아웃-->
<!--        </button>-->
<!--        -->
<!--        <div id="userInfo" class="user-info"></div>-->

<!--        <div class="security-info">-->
<!--            <h3>🔒 보안 개선사항</h3>-->
<!--            <p><strong>✅ HttpOnly 쿠키 사용</strong></p>-->
<!--            <ul>-->
<!--                <li>토큰이 쿠키에 저장되어 JavaScript로 접근 불가 (XSS 방어)</li>-->
<!--                <li>URL에 노출되지 않아 브라우저 히스토리에 남지 않음</li>-->
<!--                <li>서버 로그에 토큰이 기록되지 않음</li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        // 페이지 로드시 쿠키 확인하여 로그인 상태 체크-->
<!--        window.onload = function() {-->
<!--            // 쿠키에 accessToken이 있으면 로그인된 것으로 판단-->
<!--            if (getCookie('accessToken')) {-->
<!--                alert('로그인 성공! 토큰이 안전하게 쿠키에 저장되었습니다.');-->
<!--                checkLoginStatus();-->
<!--            }-->
<!--        };-->

<!--        function loginWithNaver() {-->
<!--            window.location.href = 'http://localhost:8080/oauth2/authorization/naver';-->
<!--        }-->

<!--        async function checkLoginStatus() {-->
<!--            try {-->
<!--                // 쿠키는 자동으로 전송됨 (credentials: 'include' 필요)-->
<!--                const response = await fetch('http://localhost:8080/api/oauth2/user', {-->
<!--                    method: 'GET',-->
<!--                    credentials: 'include',  // 쿠키 포함-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    }-->
<!--                });-->

<!--                if (response.ok) {-->
<!--                    const data = await response.json();-->
<!--                    displayUserInfo(data);-->
<!--                } else if (response.status === 401) {-->
<!--                    alert('로그인이 필요합니다.');-->
<!--                    document.getElementById('userInfo').className = 'user-info';-->
<!--                } else {-->
<!--                    alert('사용자 정보를 가져오는데 실패했습니다.');-->
<!--                }-->
<!--            } catch (error) {-->
<!--                console.error('Error:', error);-->
<!--                alert('서버와 통신 중 오류가 발생했습니다.');-->
<!--            }-->
<!--        }-->

<!--        function logout() {-->
<!--            // 쿠키 삭제 (서버에서 삭제하는 것이 더 안전하지만, 테스트용으로 클라이언트에서도 삭제)-->
<!--            document.cookie = 'accessToken=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';-->
<!--            document.cookie = 'refreshToken=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';-->
<!--            -->
<!--            alert('로그아웃되었습니다.');-->
<!--            document.getElementById('userInfo').className = 'user-info';-->
<!--        }-->

<!--        function displayUserInfo(data) {-->
<!--            const userInfoDiv = document.getElementById('userInfo');-->
<!--            userInfoDiv.className = 'user-info show';-->
<!--            -->
<!--            userInfoDiv.innerHTML = `-->
<!--                <h3>✅ 사용자 정보</h3>-->
<!--                <div class="info-item">-->
<!--                    <span class="label">이름:</span> ${data.name}-->
<!--                </div>-->
<!--                <div class="info-item">-->
<!--                    <span class="label">이메일:</span> ${data.email}-->
<!--                </div>-->
<!--                ${data.phoneNumber ? `-->
<!--                <div class="info-item">-->
<!--                    <span class="label">휴대폰:</span> ${data.phoneNumber}-->
<!--                </div>-->
<!--                ` : ''}-->
<!--                <div class="info-item">-->
<!--                    <span class="label">로그인 제공자:</span> ${data.provider}-->
<!--                </div>-->
<!--                <div class="info-item">-->
<!--                    <span class="label">권한:</span> ${data.role}-->
<!--                </div>-->
<!--                <p style="color: #28a745; margin-top: 15px;">-->
<!--                    ✓ 토큰이 HttpOnly 쿠키로 안전하게 저장되어 있습니다.-->
<!--                </p>-->
<!--            `;-->
<!--        }-->

<!--        // 쿠키 읽기 헬퍼 함수 (디버깅용 - HttpOnly 쿠키는 읽을 수 없음)-->
<!--        function getCookie(name) {-->
<!--            const value = `; ${document.cookie}`;-->
<!--            const parts = value.split(`; ${name}=`);-->
<!--            if (parts.length === 2) return parts.pop().split(';').shift();-->
<!--        }-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->
